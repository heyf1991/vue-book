webpackJsonp([2],{"5zde":function(t,e,o){o("zQR9"),o("qyJz"),t.exports=o("FeBl").Array.from},Gu7T:function(t,e,o){"use strict";e.__esModule=!0;var n,r=o("c/Tr"),s=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return(0,s.default)(t)}},NtvV:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Xxa5"),r=o.n(n),s=o("Gu7T"),a=o.n(s),i=o("exGp"),c=o.n(i),u=o("TXDt"),l=o("gyMJ"),f={data:function(){return{books:[],offset:0,hasMore:!0,loading:!0}},components:{MHeader:u.a},mounted:function(){},created:function(){this.getBook()},computed:{},methods:{getBook:function(){var t=this;return c()(r.a.mark(function e(){var o,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(l.d)(t.offset);case 3:o=e.sent,n=o.hasMore,s=o.books,t.books=[].concat(a()(t.books),a()(s)),t.offset=t.books.length,t.hasMore=n,t.loading=!1;case 10:case"end":return e.stop()}},e,t)}))()},deleted:function(t){var e=this;return c()(r.a.mark(function o(){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(l.e)(t);case 2:e.getBook();case 3:case"end":return o.stop()}},o,e)}))()},getMore:function(){this.hasMore&&!this.loading&&this.getBook()},loadMore:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.$refs.scroll;e.scrollTop+e.clientHeight+10>e.scrollHeight&&t.getMore()},50)}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("MHeader",{attrs:{back:!0}},[t._v("列表")]),t._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:t.loadMore}},[o("div",{staticClass:"booksList"},[o("ul",[o("transition-group",{attrs:{name:"fadeIn"}},t._l(t.books,function(e){return o("router-link",{key:e.bookId,attrs:{tag:"li",to:{name:"detail",params:{bid:e.bookId}}}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bookCover,expression:"book.bookCover"}]}),t._v(" "),o("div",{staticClass:"text"},[o("h3",[o("span",[t._v(t._s(e.bookId)+". ")]),t._v(t._s(e.bookName))]),t._v(" "),o("p",[t._v(t._s(e.bookInfo))]),t._v(" "),o("b",{staticClass:"text-danger"},[t._v("￥"+t._s(e.bookPrice))]),t._v(" "),o("button",{staticClass:"btn btn-warning",on:{click:function(o){return o.stopPropagation(),t.deleted(e.bookId)}}},[t._v("删除")])])])}),1)],1),t._v(" "),o("div",{staticClass:"p-3 text-center"},[t.hasMore?t._e():o("p",{staticClass:"small text-muted"},[t._v("~ 没有更多 ~")])])])])],1)},staticRenderFns:[]};var v=o("VU/8")(f,d,!1,function(t){o("cmlP")},"data-v-12b8ed70",null);e.default=v.exports},"c/Tr":function(t,e,o){t.exports={default:o("5zde"),__esModule:!0}},cmlP:function(t,e){},fBQ2:function(t,e,o){"use strict";var n=o("evD5"),r=o("X8DO");t.exports=function(t,e,o){e in t?n.f(t,e,r(0,o)):t[e]=o}},qyJz:function(t,e,o){"use strict";var n=o("+ZMJ"),r=o("kM2E"),s=o("sB3e"),a=o("msXi"),i=o("Mhyx"),c=o("QRG4"),u=o("fBQ2"),l=o("3fs2");r(r.S+r.F*!o("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,o,r,f,d=s(t),v="function"==typeof this?this:Array,h=arguments.length,k=h>1?arguments[1]:void 0,_=void 0!==k,b=0,p=l(d);if(_&&(k=n(k,h>2?arguments[2]:void 0,2)),void 0==p||v==Array&&i(p))for(o=new v(e=c(d.length));e>b;b++)u(o,b,_?k(d[b],b):d[b]);else for(f=p.call(d),o=new v;!(r=f.next()).done;b++)u(o,b,_?a(f,k,[r.value,b],!0):r.value);return o.length=b,o}})}});
//# sourceMappingURL=2.16064a8549904bbdc325.js.map